<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>ü¶íContador de Palavras Lxizeü¶í</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 5px;
    }
    th {
      background-color: gray;
      color: white;
    }
  </style>
</head>
<body>
  <h1>Contador de Palavras Lxize</h1>
  <form>
    <label for="texto">Inserte el texto:</label><br>
    <textarea id="texto" name="texto" rows="10" cols="50"></textarea>
    <br>
    <label for="idioma">Idioma:</label>
<select id="idioma" name="idioma">
  <option value="pt">Portugu√™s</option>
  <option value="es">Espanhol</option>
</select>
    <br>
    <br>
    <input type="button" value="Contar Palavras" onclick="contarPalavras()">
  </form>
  <br>
  <table id="tabela">
    <thead>
      <tr>
        <th>Palavra</th>
        <th>Quantidade</th>
      </tr>
    </thead>
    <tbody id="resultado">
    </tbody>
  </table>
  
  <script>
  var stopwords_es = [
  "de", "la", "que", "el", "en", "y", "a", "los", "se", "del", "las", "por", "un", "para", "con", "no", "una", "su",
  "al", "lo", "como", "m√°s", "pero", "sus", "le", "ya", "o", "este", "s√≠", "porque", "esta", "entre", "cuando", "muy",
  "sin", "sobre", "tambi√©n", "me", "hasta", "hay", "donde", "quien", "desde", "todo", "nos", "durante", "todos", "uno",
  "les", "ni", "contra", "otros", "ese", "eso", "ante", "ellos", "e", "esto", "m√≠", "antes", "algunos", "qu√©", "unos",
  "yo", "otro", "otras", "otra", "√©l", "tanto", "esa", "estos", "mucho", "quienes", "nada", "muchos", "cual", "poco",
  "ella", "estar", "estas", "algunas", "algo", "nosotros", "mi", "mis", "t√∫", "te", "ti", "tu", "tus", "ellas", "nosotras",
  "vosotros", "vosotras", "os", "m√≠o", "m√≠a", "m√≠os", "m√≠as", "tuyo", "tuya", "tuyos", "tuyas", "suyo", "suya", "suyos",
  "suyas", "nuestro", "nuestra", "nuestros", "nuestras", "vuestro", "vuestra", "vuestros", "vuestras", "esos", "esas",
  "estoy", "est√°s", "est√°", "estamos", "est√°is", "est√°n", "est√©", "est√©s", "estemos", "est√©is", "est√©n", "estar√©",
  "estar√°s", "estar√°", "estaremos", "estar√©is", "estar√°n", "estar√≠a", "estar√≠as", "estar√≠amos", "estar√≠ais", "estar√≠an",
  "estaba", "estabas", "est√°bamos", "estabais", "estaban", "estuve", "estuviste", "estuvo", "estuvimos", "estuvisteis",
  "estuvieron", "estuviera", "estuvieras", "estuvi√©ramos", "estuvierais", "estuvieran", "estuviese", "estuvieses",
  "estuvi√©semos", "estuvieseis", "estuviesen", "estando", "estado", "estada", "estados", "estadas", "estad", "he",
  "has", "ha", "hemos", "hab√©is", "han", "haya", "hayas", "hayamos", "hay√°is", "hayan", "habr√©", "habr√°s", "habr√°",
  "habremos", "habr√©is", "habr√°n", "habr√≠a", "habr√≠as", "habr√≠amos", "habr√≠ais", "habr√≠an", "hab√≠a", "hab√≠as",
  "hab√≠amos", "hab√≠ais", "hab√≠an", "hube", "hubiste", "hubo", "hubimos", "hubisteis", "hubieron", "hubiera",
  "hubieras", "hubi√©ramos", "hubierais", "hubieran", "hubiese", "hubieses", "hubi√©semos", "hubieseis", "hubiesen",
  "habiendo", "habido", "habida", "habidos", "habidas", "soy", "eres", "es", "somos", "sois", "son", "sea", "seas",
  "seamos", "se√°is", "sean", "ser√©", "ser√°s", "ser√°", "seremos", "ser√©is", "ser√°n", "ser√≠a", "ser√≠as", "ser√≠amos",
  "ser√≠ais", "ser√≠an", "era", "eras", "√©ramos", "erais", "eran", "fui", "fuiste", "fue", "fuimos", "fuisteis",
  "fueron", "fuera", "fueras", "fu√©ramos", "fuerais", "fueran", "fuese", "fueses", "fu√©semos", "fueseis", "fuesen",
  "siendo", "sido", "sida", "sidos", "sidas", "sed", "tengo", "tienes", "tiene", "tenemos", "ten√©is", "tienen", "tenga",
  "tengas", "tengamos", "teng√°is", "tengan", "tendr√©", "tendr√°s", "tendr√°", "tendremos", "tendr√©is", "tendr√°n",
  "tendr√≠a", "tendr√≠as", "tendr√≠amos", "tendr√≠ais", "tendr√≠an", "ten√≠a", "ten√≠as", "ten√≠amos", "ten√≠ais", "ten√≠an",
  "tuve", "tuviste", "tuvo", "tuvimos", "tuvisteis", "tuvieron", "tuviera", "tuvieras", "tuvi√©ramos", "tuvierais",
  "tuvieran", "tuviese", "tuvieses", "tuvi√©semos", "tuvieseis", "tuviesen", "teniendo", "tenido", "tenida", "tenidos",
  "tenidas", "tened"];
    
    var stopwords_pt = ['a', 'agora', 'ainda', 'algu√©m', 'algum', 'alguma', 'algumas', 'alguns', 'ampla', 'amplas', 'amplo', 'amplos', 'ante', 'antes', 'ao', 'aos', 'ap√≥s', 'aquela', 'aquelas', 'aquele', 'aqueles', 'aquilo', 'as', 'at√©', 'atrav√©s', 'cada', 'coisa', 'coisas', 'com', 'como', 'contra', 'contudo', 'da', 'daquele', 'daqueles', 'das', 'de', 'dela', 'delas', 'dele', 'deles', 'depois', 'dessa', 'dessas', 'desse', 'desses', 'desta', 'destas', 'deste', 'deste', 'destes', 'deve', 'devem', 'devendo', 'dever', 'dever√°', 'dever√£o', 'deveria', 'deveriam', 'devia', 'deviam', 'disse', 'disso', 'disto', 'dito', 'diz', 'dizem', 'do', 'dos', 'e', '√©', 'ela', 'elas', 'ele', 'eles', 'em', 'enquanto', 'entre', 'era', 'essa', 'essas', 'esse', 'esses', 'esta', 'est√°', 'estamos', 'est√£o', 'estas', 'estava', 'estavam', 'est√°vamos', 'este', 'estes', 'estou', 'eu', 'fazendo', 'fazer', 'feita', 'feitas', 'feito', 'feitos', 'foi', 'for', 'foram', 'fosse', 'fossem', 'grande', 'grandes', 'h√°', 'isso', 'isto', 'j√°', 'la', 'l√°', 'lhe', 'lhes', 'lo', 'mas', 'me', 'mesma', 'mesmas', 'mesmo', 'mesmos', 'meu', 'meus', 'minha', 'minhas', 'muita', 'muitas', 'muito', 'muitos', 'na', 'n√£o', 'nas', 'nem', 'nenhum', 'nessa', 'nessas', 'nesta', 'nestas', 'ningu√©m', 'no', 'nos', 'n√≥s', 'nossa', 'nossas', 'nosso', 'nossos', 'num', 'numa', 'nunca', 'o', 'os', 'ou', 'outra', 'outras', 'outro', 'outros', 'para', 'pela', 'pelas', 'pelo', 'pelos', 'pequena', 'pequenas', 'pequeno', 'pequenos', 'per', 'perante', 'pode', 'pude', 'podendo', 'poder', 'poderia', 'poderiam', 'podia', 'podiam', 'pois', 'por', 'por√©m', 'porque', 'posso', 'pouca', 'poucas', 'pouco', 'poucos', 'primeiro',"primeiros", "pr√≥pria", "pr√≥prias", "pr√≥prio", "pr√≥prios", "quais", "qual", "quando", "quanto", "quantos", "que", "quem", "s√£o", "se", "seja", "sejam", "sem", "sempre", "seu", "seus", "si", "sido", "s√≥", "sob", "sobre", "sua", "suas", "talvez", "tamb√©m", "tampouco", "te", "tem", "tendo", "tenha", "teu", "teus", "ti", "tido", "tinha", "tinham", "toda", "todas", "todavia", "todo", "todos", "tu", "tua", "tuas", "tudo", "√∫ltima", "√∫ltimas", "√∫ltimo", "√∫ltimos", "um", "uma", "umas", "uns", "vez", "vindo", "vos", "v√≥s", "\-"];
    
    function contarPalavras() {
  var texto = document.getElementById("texto").value.toLowerCase();
  var palavras = texto.split(/\s+/);
  var idiomaSelecionado = document.getElementById("idioma").value;
  var stopwords = [];

  if (idiomaSelecionado === "pt") {
    stopwords = stopwords_pt;
  } else if (idiomaSelecionado === "es") {
    stopwords = stopwords_es;
  }
      var contagem = {};
  //o .replace consegue adicionar as exce√ß√µes que queremos    
      for (var i = 0; i < palavras.length; i++) {
   var palavra = palavras[i].replace(/[^\w√°√£√†√©√™√≠√Æ√¨√Ø√≥√µ√¥√≤√∫√º√π√ß√±\s\-]/gi, '').replace(/cadastr(os?|ar?)/gi, 'cadastro').replace(/c[o√≥]digos?/gi, 'codigo').replace(/carr(inh)?os?/gi, 'carro').replace(/mot(o|inha)s?/gi,'moto').replace(/campinas.+\b/gi,'campinas');

  
  if (palavra !== "" && !stopwords.includes(palavra)) {
    if (contagem[palavra] === undefined) {
      contagem[palavra] = 1;
    } else {
      contagem[palavra]++;
    }
  }
}      
      var resultado = document.getElementById("resultado");
      resultado.innerHTML = "";
      
      Object.keys(contagem).sort(function(a, b) {
        return contagem[b] - contagem[a];
      }).forEach(function(palavra) {
        var tr = document.createElement("tr");
        var td1 = document.createElement("td");
        var td2 = document.createElement("td");
        
        td1.appendChild(document.createTextNode(palavra));
        td2.appendChild(document.createTextNode(contagem[palavra]));
        
        tr.appendChild(td1);
        tr.appendChild(td2);
        
        resultado.appendChild(tr);
      });
    }
  </script>
</body>
</html>
